
# ls
alias ls="ls -1HhFp --color --group-directories-first --time-style='+%Y-%m-%d %H:%M:%S' --hide='Icon?' --hide='.DS_Store' --ignore='lost+found'"
alias l="ls -lN"
alias lsb="ls -Ssr"
alias la="ls -lA"
alias ks="ls"

# quit easily
alias q=" exit"
alias :q=" q"
alias q:=" q"
alias quit=" q"

# system utilities
alias mv="nocorrect mv -v"
alias cp="nocorrect cp -v"
alias sudo="nocorrect sudo"
alias df="df -H"
alias mkdir="mkdir -p -v"
alias e="${EDITOR}"
alias grep="grep --color=auto"

# tex live
alias tlmgr="sudo tlmgr"

# tex
alias latexpre='latex -ini -job-name="preamble" "&latex preamble.pre\dump"'

# auto sudoedit when file is not editable in vim
# alias e="$EDITOR"
alias a="git add"
alias c="git commit"
function fixup() {
  git commit --fixup="$1"
}

# open a file / folder
# defaults to opening current dir
function o {
  folder=${1:-.}
  open $folder
}

# copy a file to clipboard
function copy() {
  cat $1 | pbcopy
}

# send tcp packet to port on host
# eg.
#   $ tcp localhost 3000 foo
function tcp () {
  local host="$1"
  local port="$2"
  shift
  shift
  echo "$@" | nc $host $port
}

# compress a file or folder
function compress {
  tar zcvf "$1.tar.gz" "$1"
}

function transfer() {
  if [ $# -eq 0 ]; then
    echo "No arguments specified. Usage:\necho transfer /tmp/test.md\ncat /tmp/test.md | transfer test.md";
    return 1;
  fi

  if [ -d "$1" ]; then
    local tarred="$1.tar"
    if [ ! -r "$tarred" ]; then
      echo "tarring..."
      tar cvf "$tarred" "$1"
    fi
    transfer "$tarred"
    return $?
  fi

  echo "uploading..."
  tmpfile=$( mktemp -t transferXXX )
  if tty -s; then
    basefile=$(basename "$1" | sed -e 's/[^a-zA-Z0-9._-]/-/g')
    curl --progress-bar --upload-file "$1" "https://transfer.sh/$basefile" >> $tmpfile;
  else
    curl --progress-bar --upload-file "-" "https://transfer.sh/$1" >> $tmpfile
  fi
  url=`cat "$tmpfile"`
  echo "$url/).zip" | sed "s|https://transfer.sh/|https://transfer.sh/(/|"
  rm -f $tmpfile
}


# vim: ft=zsh fdm=marker
